provider: confluentcloud
lint: false
major-version: 1
providerDefaultBranch: main
env:
  CONFLUENT_CLOUD_API_KEY: ${{ secrets.CONFLUENT_CLOUD_API_KEY }}
  CONFLUENT_CLOUD_API_SECRET: ${{ secrets.CONFLUENT_CLOUD_API_SECRET }}
upstream-provider-repo: terraform-provider-confluent
makeTemplate: bridged
plugins:
  - name: random 
    version: "4.1.1"
team: ecosystem

actions:
  preTest:
    - name: make upstream
      run: |
        make upstream
    - name: Run provider tests
      run: |
        cd provider && go test -v -json -count=1 -cover -timeout 2h -tags=${{ matrix.language }} -parallel 4 . 2>&1 | tee /tmp/gotest.log | gotestfmt
